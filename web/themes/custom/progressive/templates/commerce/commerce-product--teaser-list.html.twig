{#
/**
 * @file
 *
 * Default product template.
 *
 * Available variables:
 * - attributes: HTML attributes for the wrapper.
 * - product: The rendered product fields.
 *   Use 'product' to print them all, or print a subset such as
 *   'product.title'. Use the following code to exclude the
 *   printing of a given field:
 *   @code
 *   {{ product|without('title') }}
 *   @endcode
 * - product_entity: The product entity.
 * - product_url: The product URL.
 *
 * @ingroup themeable
 */
#}
<article{{ attributes }}>

  <div class="product">
    <div class="col-sm-4 col-md-4">
      <a href="{{ product_url }}" class="product-image">
  	    {% if product.variation_field__corner_text is defined and product['variation_field__corner_text'][0] is not empty %}
          {% set corner_text = product['variation_field__corner_text'][0]['#context']['value'] %}
          <span class="sale corner-{{ corner_text|lower }}">
            <span>{{ product.variation_field__corner_text }}</span>
          </span>
        {% endif %}
        {{ product['variation_field_images'][0] }}
      </a>
    </div>
    <div class="col-sm-8 col-md-8">
      <h3 class="product-name">
        <a href="{{ product_url }}">{{ product.variation_title }}</a>
      </h3>
      <div class="reviews-box">
        {{ product.field_rating }}
        <span class="review-count">
		  {% set comments = product.field_reviews['#items'].comment_count != NULL ? product.field_reviews['#items'].comment_count : 0 %}
          {{ comments }} {{ 'review(s)'|t }}
        </span>
        <span class="separator">|</span>
        <a href="{{ product_url }}" class="add-review">{{ 'Add your review'|t }}</a>
      </div>
      <div class="excerpt">
        {{ product.body }}
      </div>
      <div class="price-box">
        {% if product.variation_field_old_price is defined and product['variation_field_old_price'][0] is not empty %}
          {{ product.variation_field_old_price }}
        {% endif %}
        <span class="price">{{ product.variation_price }}</span>
      </div>
      <div class="actions">
        <div class="hidden-form">
          {{ product['variations'][0] }}
        </div>
        <span>
          <a href="#" class="add-cart js-active-link">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
              <g>
                <path fill="#1e1e1e" d="M15.001,4h-0.57l-3.707-3.707c-0.391-0.391-1.023-0.391-1.414,0c-0.391,0.391-0.391,1.023,0,1.414L11.603,4
            H4.43l2.293-2.293c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0L1.602,4H1C0.448,4,0,4.448,0,5s0.448,1,1,1
            c0,2.69,0,7.23,0,8c0,1.104,0.896,2,2,2h10c1.104,0,2-0.896,2-2c0-0.77,0-5.31,0-8c0.553,0,1-0.448,1-1S15.554,4,15.001,4z
            M13.001,14H3V6h10V14z"></path>
                <path fill="#1e1e1e" d="M11.001,13c0.553,0,1-0.447,1-1V8c0-0.553-0.447-1-1-1s-1,0.447-1,1v4C10.001,12.553,10.448,13,11.001,13z"></path>
                <path fill="#1e1e1e" d="M8,13c0.553,0,1-0.447,1-1V8c0-0.553-0.448-1-1-1S7,7.447,7,8v4C7,12.553,7.448,13,8,13z"></path>
                <path fill="#1e1e1e" d="M5,13c0.553,0,1-0.447,1-1V8c0-0.553-0.447-1-1-1S4,7.447,4,8v4C4,12.553,4.448,13,5,13z"></path>
              </g>
            </svg>
          </a>
        </span>
        <span class="flag-wrapper flag-wishlist">
  		  {{ product.flag_wishlist }}
        </span>
        <span class="flag-wrapper flag-compare">
          {{ product.flag_compare }}
        </span>
      </div><!-- .actions -->
    </div>
  </div><!-- .product -->

</article>
